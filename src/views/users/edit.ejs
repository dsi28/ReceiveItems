<% include ../partials/header.ejs%>
<div class='container default-item-top-margin default-item-bottom-margin'>
    <h1 class='center-text-item'>Edit user <%=user.username%></h1>
    <div class='row'>
        <div class='form-setup'>
            <form method='POST' action='/users/<%=user.id%>?_method=PUT'>
                <div class='form-group'>
                    <label for='username'>Username</label>
                    <input class='form-control' type='text' name='user[username]' id='username' value='<%=user.username%>' readonly required>
                </div>
                <div class='form-group'>
                    <label for='email'>Email</label>
                    <input class='form-control' type='email' name='user[email]' id='email' value='<%=user.email%>'>
                </div> 
                <%if(currentUser && currentUser.role == 'admin' ){%>
                    <div class='form-group'>
                        <label for='role'>Role</label>
                        <select class='form-control' type='select' name='user[role]'>
                        <%if(user.role=='admin'){%>
                            <option value='admin' selected>Admin</option>
                            <option value='standard'>Standard User</option>
                        <%}else{%>
                        <option value='standard' select>Standard User</option>
                        <option value='admin' >Admin</option>
                        <%}%>    
                        </select>
                    </div>
                <%}else{%>
                    <div class='form-group'>
                        <label for='roleDisplay'>Role</label>
                        <input class='form-control' type='text' name='user[role]' id='roleDisplay' value='<%=user.role%>' readonly>
                    </div>
                <%}%>
                <button class='btn btn-lg btn-success btn-block' type='submit'>Update</button>
            </form>
            <a href='/users/<%=user.id%>'>Back!</a>
        </div>
    </div>
</div>
<% include ../partials/footer.ejs%>